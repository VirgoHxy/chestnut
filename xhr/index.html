<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    // 1. 创建一个 new XMLHttpRequest 对象
    let xhr = new XMLHttpRequest();

    // 2. 配置它：从 URL /article/.../load GET-request
    xhr.open('GET', 'http://resources.it-wy.cn/test/img/parking.jpg');
    // 3. 通过网络发送请求
    xhr.send();

    // 4. 当接收到响应后，将调用此函数
    xhr.onload = function () {
      if (xhr.status != 200) { // 分析响应的 HTTP 状态
        console.log(`Error ${xhr.status}: ${xhr.statusText}`); // 例如 404: Not Found
      } else { // 显示结果
        console.log(`Done, got ${xhr.response.length} bytes`); // response 是服务器响应
      }
    };

    xhr.onprogress = function (event) {
      if (event.lengthComputable) {
        console.log(`Received ${event.loaded} of ${event.total} bytes`);
        console.log(`Received ${event.loaded / event.total * 100}%`);
      } else {
        console.log(`Received ${event.loaded} bytes`); // 没有 Content-Length
      }

    };

    xhr.onerror = function () {
      console.log("Request failed");
    };
  </script>
</body>

</html>